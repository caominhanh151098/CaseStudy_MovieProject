<html xmlns:th="http://www.thymeleaf.org" lang="en">
<div th:fragment="js">
    <script th:inline="javascript">
        const showMovies = document.getElementById("movie");
        const showCartoons = document.getElementById("cartoon");
        const showEpMovies = document.getElementById("episode_movie");
        const showLAMovies = document.getElementById("live_action_movie");
        let movies = [];
        renderHeaderBar(0);
        renderUpdateMovies();
        renderCartoonMovies();
        renderEpMovies();
        renderLAMovies();

        function renderUpdateMovies() {
            $.ajax({
                url: `http://localhost:8080/api/movie/show/all/0?sort=id,desc`,
                method: "GET"
            }).done(data => {
                movies = data.content;
                showMovies.innerHTML = "";
                movies.forEach(m => showMovies.innerHTML += renderMovie(m));
            })
        }

        function renderCartoonMovies() {
            $.ajax({
                url: `http://localhost:8080/api/movie/show/4/0?sort=id,desc`,
                method: "GET"
            }).done(data => {
                movies = data.content;
                showCartoons.innerHTML = "";
                movies.forEach(m => showCartoons.innerHTML += renderMovie(m));
            })
        }

        function renderEpMovies() {
            $.ajax({
                url: `http://localhost:8080/api/movie/show/seriesM/0?sort=id,desc`,
                method: "GET"
            }).done(data => {
                movies = data.content;
                showEpMovies.innerHTML = "";
                movies.forEach(m => showEpMovies.innerHTML += renderMovie(m));
            })
        }

        function renderLAMovies() {
            $.ajax({
                url: `http://localhost:8080/api/movie/show/14/0?sort=id,desc`,
                method: "GET"
            }).done(data => {
                movies = data.content;
                showLAMovies.innerHTML = "";
                movies.forEach(m => showLAMovies.innerHTML += renderMovie(m));
            })
        }
    </script>
</div>